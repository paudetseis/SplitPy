

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scripts &mdash; SplitPy 0.2.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=37f418d5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorials" href="tutorials.html" />
    <link rel="prev" title="Classes" href="api.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            SplitPy
              <img src="_static/SplitPy_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Quick Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="links.html">GitHub Repositories</a></li>
<li class="toctree-l1"><a class="reference internal" href="links.html#references">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="links.html#citing-splitpy">Citing SplitPy</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="splitpy.html">Licence</a></li>
<li class="toctree-l1"><a class="reference internal" href="splitpy.html#installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="splitpy.html#using-local-data">Using local data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html#module-splitpy.gui">GUI classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html#modules">Modules</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Scripts &amp; Tutorials</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Scripts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#split-calc-auto"><code class="docutils literal notranslate"><span class="pre">split_calc_auto</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#split-calc-manual"><code class="docutils literal notranslate"><span class="pre">split_calc_manual</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#split-average"><code class="docutils literal notranslate"><span class="pre">split_average</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Usage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SplitPy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Scripts</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/scripts.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <figure class="align-center">
<img alt="_images/SplitPy_logo.png" src="_images/SplitPy_logo.png" />
</figure>
<section id="scripts">
<h1>Scripts<a class="headerlink" href="#scripts" title="Link to this heading"></a></h1>
<p>There are several Python scripts that accompany <code class="xref py py-mod docutils literal notranslate"><span class="pre">splitpy</span></code>, which can be used
in bash scripts to automate data processing. These include scripts to download
three-component seismogram data and automatically calculate splitting parameters,
manually refine the analysis window for more precise estimates, and final averaging
of splitting parameters at single stations. All of them use
a station database provided as a <code class="xref py py-class docutils literal notranslate"><span class="pre">StDb</span></code> dictionary.</p>
<section id="split-calc-auto">
<span id="splitauto"></span><h2><code class="docutils literal notranslate"><span class="pre">split_calc_auto</span></code><a class="headerlink" href="#split-calc-auto" title="Link to this heading"></a></h2>
<section id="description">
<h3>Description<a class="headerlink" href="#description" title="Link to this heading"></a></h3>
<p>This script can be used in one of two ways: 1) to download/collect available
teleseismic shear-wave data for later processing; and 2) to further perform
an automated processing for the shear-wave splitting estimates using default
parameters. Station selection is specified by a network and
station code. The data base is provided in a pickled file as a
<code class="xref py py-class docutils literal notranslate"><span class="pre">StDb</span></code> dictionary.</p>
</section>
<section id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ split_calc_auto -h

###################################################################
#            _ _ _                _                     _         #
#  ___ _ __ | (_) |_     ___ __ _| | ___     __ _ _   _| |_ ___   #
# / __| &#39;_ \| | | __|   / __/ _` | |/ __|   / _` | | | | __/ _ \  #
# \__ \ |_) | | | |_   | (_| (_| | | (__   | (_| | |_| | || (_) | #
# |___/ .__/|_|_|\__|___\___\__,_|_|\___|___\__,_|\__,_|\__\___/  #
#     |_|          |_____|             |_____|                    #
#                                                                 #
###################################################################

usage: split_calc_auto [arguments] &lt;station database&gt;

Script wrapping together the python-based implementation of SplitLab by
Wustefeld and others. This version requests data on the fly for a given date
range. Data is requested from the internet using the client services framework
or from data provided on a local disk. The stations are processed one by one
with the SKS Splitting parameters measured individually using both the
Rotation-Correlation (RC) and Silver &amp; Chan (SC) methods.

positional arguments:
  indb                  Station Database to process from.

optional arguments:
  -h, --help            show this help message and exit
  --keys STKEYS         Specify a comma separated list of station keys for
                        which to perform the analysis. These must be contained
                        within the station database. Partial keys will be used
                        to match against those in the dictionary. For
                        instance, providing IU will match with all stations in
                        the IU network [Default processes all stations in the
                        database]
  -V, --verbose         Specify to increase verbosity.
  -O, --overwrite       Force the overwriting of pre-existing Split results.
                        Default behaviour prompts for those that already
                        exist. Selecting overwrite and skip (ie, both flags)
                        negate each other, and both are set to false (every
                        repeat is prompted). [Default False]
  --zcomp ZCOMP         Specify the Vertical Component Channel Identifier. [Default Z].
  --calc                Analyze data for shear-wave splitting. [Default saves
                        data to folders for subsequent analysis]
  --recalc              Re-calculate estimates and overwrite existing splitting results
                        without re-downloading data. [Default False]
  --plot-diagnostic
                        Plot diagnostic window at end of process. [Default
                        False]

Server Settings:
  Settings associated with which datacenter to log into.

  --server SERVER       Base URL of FDSN web service compatible server (e.g.
                        “http://service.iris.edu”) or key string for recognized server (one
                        of &#39;AUSPASS&#39;, &#39;BGR&#39;, &#39;EARTHSCOPE&#39;, &#39;EIDA&#39;, &#39;EMSC&#39;, &#39;ETH&#39;, &#39;GEOFON&#39;,
                        &#39;GEONET&#39;, &#39;GFZ&#39;, &#39;ICGC&#39;, &#39;IESDMC&#39;, &#39;INGV&#39;, &#39;IPGP&#39;, &#39;IRIS&#39;, &#39;IRISPH5&#39;,
                        &#39;ISC&#39;, &#39;KNMI&#39;, &#39;KOERI&#39;, &#39;LMU&#39;, &#39;NCEDC&#39;, &#39;NIEP&#39;, &#39;NOA&#39;, &#39;NRCAN&#39;,
                        &#39;ODC&#39;, &#39;ORFEUS&#39;, &#39;RASPISHAKE&#39;, &#39;RESIF&#39;, &#39;RESIFPH5&#39;, &#39;SCEDC&#39;,
                        &#39;TEXNET&#39;, &#39;UIB-NORSAR&#39;, &#39;USGS&#39;, &#39;USP&#39;). [Default &#39;IRIS&#39;]
  --user-auth USERAUTH  Authentification Username and Password for the waveform server
                        (--user-auth=&#39;username:authpassword&#39;) to access and download
                        restricted data. [Default no user and password]
  --eida-token TOKENFILE
                        Token for EIDA authentication mechanism, see http://geofon.gfz-
                        potsdam.de/waveform/archive/auth/index.php. If a token is provided,
                        argument --user-auth will be ignored. This mechanism is only
                        available on select EIDA nodes. The token can be provided in form of
                        the PGP message as a string, or the filename of a local file with the
                        PGP message in it. [Default None]

Local Data Settings:
  Settings associated with defining and using a local data base of pre-downloaded day-long
  SAC or MSEED files.

  --local-data LOCALDATA
                        Specify absolute path to a SeisComP Data Structure (SDS) archive
                        containing day-long SAC or MSEED files(e.g., --local-
                        data=/Home/username/Data/SDS). See
                        https://www.seiscomp.de/seiscomp3/doc/applications/slarchive/SDS.html
                        for details on the SDS format. If this option is used, it takes
                        precedence over the --server settings.
  --dtype DTYPE         Specify the data archive file type, either SAC or MSEED. Note the
                        default behaviour is to search for SAC files. Local archive files
                        must have extensions of &#39;.SAC&#39; or &#39;.MSEED&#39;. These are case dependent,
                        so specify the correct case here.

Parameter Settings:
  Miscellaneous default values and settings

  --sampling-rate NEW_SAMPLING_RATE
                        Specify new sampling rate in Hz. [Default 10.]
  --min-snr MSNR        Minimum SNR value calculated on the radial (Q)
                        component to proceed with analysis (dB). [Default 5.]
  --window DTS          Specify time window length before and after the SKS
                        arrival. The total window length is 2*dst (sec).
                        [Default 120]
  --max-delay MAXDT     Specify the maximum delay time in search (sec).
                        [Default 4]
  --dt-delay DDT        Specify the time delay increment in search (sec).
                        [Default 0.1]
  --dphi DPHI           Specify the fast angle increment in search (degree).
                        [Default 1.]
  --snrT SNRTLIM        Specify the minimum SNR Threshold for the Transverse
                        component to be considered Non-Null. [Default 1.]
  --fmin FMIN           Specify the minimum frequency corner for SNR filter
                        (Hz). [Default 0.02]
  --fmax FMAX           Specify the maximum frequency corner for SNR filter
                        (Hz). [Default 0.5]

Event Settings:
  Settings associated with refining the events to include in matching
  station pairs

  --start STARTT        Specify a UTCDateTime compatible string representing
                        the start time for the event search. This will
                        override any station start times. [Default start date
                        of each station]
  --end ENDT            Specify a UTCDateTime compatible string representing
                        the end time for the event search. This will override
                        any station end times [Default end date of each
                        station]
  --reverse             Reverse order of events. Default behaviour starts at
                        oldest event and works towards most recent. Specify
                        reverse order and instead the program will start with
                        the most recent events and work towards older
  --min-mag MINMAG      Specify the minimum magnitude of event for which to
                        search. [Default 6.0]
  --max-mag MAXMAG      Specify the maximum magnitude of event for which to
                        search. [Default None, i.e. no limit]

Geometry Settings:
  Settings associatd with the event-station geometries

  --min-dist MINDIST    Specify the minimum great circle distance (degrees)
                        between the station and event. [Default 85]
  --max-dist MAXDIST    Specify the maximum great circle distance (degrees)
                        between the station and event. [Default 120]
  --phase PHASE         Specify the phase name to use. Be careful with the
                        distance. setting. Options are &#39;SKS&#39; or &#39;SKKS&#39;.
                        [Default &#39;SKS&#39;]
</pre></div>
</div>
</section>
</section>
<section id="split-calc-manual">
<span id="splitmanual"></span><h2><code class="docutils literal notranslate"><span class="pre">split_calc_manual</span></code><a class="headerlink" href="#split-calc-manual" title="Link to this heading"></a></h2>
<section id="id1">
<h3>Description<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>This script is used if the user desires manual re-picking of the analysis window
for refined estimates. Station selection is specified by a network and
station code. The data base is provided in a pickled file as a
<code class="xref py py-class docutils literal notranslate"><span class="pre">StDb</span></code> dictionary.</p>
</section>
<section id="id2">
<h3>Usage<a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ split_calc_manual -h

###################################################################################
#            _ _ _                _                                            _  #
#  ___ _ __ | (_) |_     ___ __ _| | ___     _ __ ___   __ _ _ __  _   _  __ _| | #
# / __| &#39;_ \| | | __|   / __/ _` | |/ __|   | &#39;_ ` _ \ / _` | &#39;_ \| | | |/ _` | | #
# \__ \ |_) | | | |_   | (_| (_| | | (__    | | | | | | (_| | | | | |_| | (_| | | #
# |___/ .__/|_|_|\__|___\___\__,_|_|\___|___|_| |_| |_|\__,_|_| |_|\__,_|\__,_|_| #
#     |_|          |_____|             |_____|                                    #
#                                                                                 #
###################################################################################

usage: split_calc_manual [arguments] &lt;station database&gt;

Script to process and calculate the spliting parameters for a dataset that has
already been downloaded by split_calc_auto.

positional arguments:
  indb                  Station Database to process from.

optional arguments:
  -h, --help            show this help message and exit
  --keys STKEYS         Specify a comma separated list of station keys for
                        which to perform analysis. These must be contained
                        within the station database. Partial keys will be used
                        to match against those in the dictionary. For
                        instance, providing IU will match with all stations in
                        the IU network [Default processes all stations in the
                        database]
  -v, -V, --verbose     Specify to increase verbosity.

Parameter Settings:
  Miscellaneous default values and settings

  --window DTS          Specify time window length before and after the SKS
                        arrival. The total window length is 2*dst (sec).
                        [Default 120]
  --max-delay MAXDT     Specify the maximum delay time. [Default 4 s]
  --time-increment DDT  Specify the time increment. [Default 0.1 s]
  --angle-increment DPHI
                        Specify the angle increment. [Default 1 d]
  --transverse-SNR SNRTLIM
                        Specify the minimum SNR Threshold for the Transverse
                        component to be considered Non-Null. [Default 1.]

Event Settings:
  Settings associated with refining the events to include in matching
  station pairs

  --start STARTT        Specify a UTCDateTime compatible string representing
                        the start time for the event search. This will
                        override any station start times. [Default more recent
                        start date for each station pair]
  --end ENDT            Specify a UTCDateTime compatible string representing
                        the end time for the event search. This will override
                        any station end times [Default older end date for each
                        the pair of stations]
  --reverse-order       Reverse order of events. Default behaviour starts at
                        oldest event and works towards most recent. Specify
                        reverse order and instead the program will start with
                        the most recent events and work towards older
</pre></div>
</div>
</section>
</section>
<section id="split-average">
<span id="splitaverage"></span><h2><code class="docutils literal notranslate"><span class="pre">split_average</span></code><a class="headerlink" href="#split-average" title="Link to this heading"></a></h2>
<section id="id3">
<h3>Description<a class="headerlink" href="#id3" title="Link to this heading"></a></h3>
<p>This script is used for producing station average shear-wave splitting estimates obtained
from either the automated or manual mode.
Station selection is specified by a network and
station code. The data base is provided in a pickled file as a
<code class="xref py py-class docutils literal notranslate"><span class="pre">StDb</span></code> dictionary.</p>
</section>
<section id="id4">
<h3>Usage<a class="headerlink" href="#id4" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ split_average -h

###############################################################
#            _ _ _                                            #
#  ___ _ __ | (_) |_     __ ___   _____ _ __ __ _  __ _  ___  #
# / __| &#39;_ \| | | __|   / _` \ \ / / _ \ &#39;__/ _` |/ _` |/ _ \ #
# \__ \ |_) | | | |_   | (_| |\ V /  __/ | | (_| | (_| |  __/ #
# |___/ .__/|_|_|\__|___\__,_| \_/ \___|_|  \__,_|\__, |\___| #
#     |_|          |_____|                        |___/       #
#                                                             #
###############################################################

usage: split_average [arguments] &lt;station database&gt;

Script to plot the average splitting results for a given station. Loads the available .pkl
files in the specified Station Directory.

positional arguments:
  indb           Station Database to process from.

options:
  -h, --help     show this help message and exit
  --keys STKEYS  Specify a comma separated list of station keys for which to perform
                 analysis. These must be contained within the station database. Partial keys
                 will be used to match against those in the dictionary. For instance,
                 providing IU will match with all stations in the IU network [Default
                 processes all stations in the database]
  -V, --verbose  Specify to increase verbosity.
  --show-fig     Specify show plots during processing - they are still saved to disk.
                 [Default only saves]
  --auto         Specify to use automatically processed split results. [Default uses refined
                 (&#39;manual&#39;) split results]

Null Selection Settings:
  Settings associated with selecting which Null or Non-Null data is included

  --nulls        Specify this flag to include Null Values in the average. [Default Non-Nulls
                 only]
  --no-nons      Specify this flag to exclude Non-Nulls from the average [Default False]

Quality Selection Settings:
  Settings associated with selecting the qualities to include in the selection.

  --no-good      Specify to exclude &#39;Good&#39; measurements from the average. [Default Good +
                 Fair]
  --no-fair      Specify to exclude &#39;Fair&#39; measurements from the average [Default Good +
                 Fair]
  --poor         Specify to include &#39;Poor&#39; measurements in the average [Default No Poors]
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="api.html" class="btn btn-neutral float-left" title="Classes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tutorials.html" class="btn btn-neutral float-right" title="Tutorials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, Pascal Audet &amp; Andrew Schaeffer.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>